var data = {lines:[
{"lineNum":"    1","line":"#include \"synergia/lattice/lattice.h\""},
{"lineNum":"    2","line":"#include \"synergia/lattice/lattice_element_processor.h\""},
{"lineNum":"    3","line":"#include \"synergia/lattice/madx_reader.h\""},
{"lineNum":"    4","line":""},
{"lineNum":"    5","line":"// for writing out deposited charge"},
{"lineNum":"    6","line":"#include \"synergia/utils/hdf5_file.h\""},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":""},
{"lineNum":"    9","line":"#include <sstream>"},
{"lineNum":"   10","line":"#include <unordered_set>"},
{"lineNum":"   11","line":"#include <stdexcept>"},
{"lineNum":"   12","line":""},
{"lineNum":"   13","line":"Lattice::Lattice()"},
{"lineNum":"   14","line":"    : name(\"\")"},
{"lineNum":"   15","line":"    , reference_particle()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   16","line":"    , elements()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   17","line":"    , updated { true, true, true }","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   18","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   19","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   20","line":""},
{"lineNum":"   21","line":"Lattice::Lattice(std::string const & name)"},
{"lineNum":"   22","line":"    : name(name)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   23","line":"    , reference_particle()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   24","line":"    , elements()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   25","line":"    , updated { true, true, true }","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   26","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   27","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   28","line":""},
{"lineNum":"   29","line":"Lattice::Lattice(Lattice const & o)"},
{"lineNum":"   30","line":"    : name(o.name)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   31","line":"    , reference_particle(o.reference_particle)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   32","line":"    , elements(o.elements)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   33","line":"    , updated(o.updated)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   34","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   35","line":"    for (auto & e : elements) e.set_lattice(*this);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   36","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   37","line":""},
{"lineNum":"   38","line":"Lattice::Lattice(Lattice && o) noexcept"},
{"lineNum":"   39","line":"    : name(std::move(o.name))"},
{"lineNum":"   40","line":"    , reference_particle(std::move(o.reference_particle))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   41","line":"    , elements(std::move(o.elements))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   42","line":"    , updated(std::move(o.updated))","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   43","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   44","line":"    for (auto & e : elements) e.set_lattice(*this);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   45","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   46","line":""},
{"lineNum":"   47","line":"Lattice&"},
{"lineNum":"   48","line":"Lattice::operator=(Lattice const& o)"},
{"lineNum":"   49","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   50","line":"    name = o.name;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   51","line":"    reference_particle = o.reference_particle;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   52","line":"    elements = o.elements;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   53","line":"    updated = o.updated;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   54","line":""},
{"lineNum":"   55","line":"    for (auto & e : elements) e.set_lattice(*this);","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   56","line":""},
{"lineNum":"   57","line":"    return *this;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   58","line":"}"},
{"lineNum":"   59","line":""},
{"lineNum":"   60","line":""},
{"lineNum":"   61","line":"Lattice::Lattice(Lsexpr const & lsexpr)"},
{"lineNum":"   62","line":"    : name(\"\")"},
{"lineNum":"   63","line":"    , reference_particle()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   64","line":"    , elements()","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   65","line":"    , updated { true, true, true }","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   66","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   67","line":"    for (auto const& lse : lsexpr)","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   68","line":"    {"},
{"lineNum":"   69","line":"        if (lse.is_labeled())","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   70","line":"        {"},
{"lineNum":"   71","line":"            if (lse.get_label() == \"name\")","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   72","line":"            {"},
{"lineNum":"   73","line":"                name = lse.get_string();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   74","line":"            }"},
{"lineNum":"   75","line":"#if 0"},
{"lineNum":"   76","line":"            else if (it->get_label() == \"type\")"},
{"lineNum":"   77","line":"            {"},
{"lineNum":"   78","line":"                std::string lctype(it->get_string());"},
{"lineNum":"   79","line":"                std::transform(lctype.begin(), lctype.end(), lctype.begin(), ::tolower);"},
{"lineNum":"   80","line":"                if (lctype == \"mad8\")"},
{"lineNum":"   81","line":"                {"},
{"lineNum":"   82","line":"                    element_adaptor_map_sptr = boost::shared_ptr<Element_adaptor_map>(new Mad8_adaptor_map);"},
{"lineNum":"   83","line":"                }"},
{"lineNum":"   84","line":"                else if (lctype == \"madx\")"},
{"lineNum":"   85","line":"                {"},
{"lineNum":"   86","line":"                    element_adaptor_map_sptr = boost::shared_ptr<Element_adaptor_map>(new MadX_adaptor_map);"},
{"lineNum":"   87","line":"                }"},
{"lineNum":"   88","line":"                else"},
{"lineNum":"   89","line":"                {"},
{"lineNum":"   90","line":"                    throw std::runtime_error(\"Lattice: adaptor map type \" +"},
{"lineNum":"   91","line":"                                             it->get_string() + \" not handled\");"},
{"lineNum":"   92","line":"                }"},
{"lineNum":"   93","line":"            }"},
{"lineNum":"   94","line":"#endif"},
{"lineNum":"   95","line":"            else if (lse.get_label() == \"reference_particle\")","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   96","line":"            {"},
{"lineNum":"   97","line":"                reference_particle = Reference_particle(lse);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   98","line":"            }"},
{"lineNum":"   99","line":"            else if (lse.get_label() == \"elements\")","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  100","line":"            {"},
{"lineNum":"  101","line":"                for (auto const& ele : lse)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  102","line":"                {"},
{"lineNum":"  103","line":"                    append(Lattice_element(ele));","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  104","line":"                }"},
{"lineNum":"  105","line":"            }"},
{"lineNum":"  106","line":"        }"},
{"lineNum":"  107","line":"    }"},
{"lineNum":"  108","line":""},
{"lineNum":"  109","line":"#if 0"},
{"lineNum":"  110","line":"    for (Lsexpr::const_iterator_t it = lsexpr.begin(); it != lsexpr.end();"},
{"lineNum":"  111","line":"         ++it) {"},
{"lineNum":"  112","line":"        if (it->is_labeled()) {"},
{"lineNum":"  113","line":"            if (it->get_label() == \"name\") {"},
{"lineNum":"  114","line":"                name = it->get_string();"},
{"lineNum":"  115","line":"            } else if (it->get_label() == \"type\") {"},
{"lineNum":"  116","line":"                std::string lctype(it->get_string());"},
{"lineNum":"  117","line":"                std::transform(lctype.begin(), lctype.end(), lctype.begin(),"},
{"lineNum":"  118","line":"                               ::tolower);"},
{"lineNum":"  119","line":"                if (lctype == \"mad8\") {"},
{"lineNum":"  120","line":"                    element_adaptor_map_sptr = boost::shared_ptr<Element_adaptor_map>(new Mad8_adaptor_map);"},
{"lineNum":"  121","line":"                } else if (lctype == \"madx\") {"},
{"lineNum":"  122","line":"                    element_adaptor_map_sptr = boost::shared_ptr<Element_adaptor_map>(new MadX_adaptor_map);"},
{"lineNum":"  123","line":"                } else {"},
{"lineNum":"  124","line":"                    throw std::runtime_error(\"Lattice: adaptor map type \" +"},
{"lineNum":"  125","line":"                                             it->get_string() + \" not handled\");"},
{"lineNum":"  126","line":"                }"},
{"lineNum":"  127","line":"            } else if (it->get_label() == \"reference_particle\") {"},
{"lineNum":"  128","line":"                reference_particle = new Reference_particle(*it);"},
{"lineNum":"  129","line":"                reference_particle_allocated = true;"},
{"lineNum":"  130","line":"            } else if (it->get_label() == \"elements\") {"},
{"lineNum":"  131","line":"                for (Lsexpr::const_iterator_t eit = it->begin();"},
{"lineNum":"  132","line":"                     eit != it->end(); ++eit) {"},
{"lineNum":"  133","line":"                    append(Lattice_element(*eit));"},
{"lineNum":"  134","line":"                }"},
{"lineNum":"  135","line":"            }"},
{"lineNum":"  136","line":"        }"},
{"lineNum":"  137","line":"    }"},
{"lineNum":"  138","line":"#endif"},
{"lineNum":"  139","line":"}","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  140","line":""},
{"lineNum":"  141","line":"#if 0"},
{"lineNum":"  142","line":"Lsexpr"},
{"lineNum":"  143","line":"Lattice::as_lsexpr() const"},
{"lineNum":"  144","line":"{"},
{"lineNum":"  145","line":"    Lsexpr retval;"},
{"lineNum":"  146","line":"#if 0"},
{"lineNum":"  147","line":"    retval.push_back(Lsexpr(name, \"name\"));"},
{"lineNum":"  148","line":"    retval.push_back(Lsexpr(element_adaptor_map_sptr->get_label(),"},
{"lineNum":"  149","line":"                            \"type\"));"},
{"lineNum":"  150","line":"    if (reference_particle) {"},
{"lineNum":"  151","line":"        Lsexpr ref_lsexpr(reference_particle->as_lsexpr());"},
{"lineNum":"  152","line":"        ref_lsexpr.set_label(\"reference_particle\");"},
{"lineNum":"  153","line":"        retval.push_back(ref_lsexpr);"},
{"lineNum":"  154","line":"    }"},
{"lineNum":"  155","line":"    Lsexpr elements_lsexpr;"},
{"lineNum":"  156","line":"    elements_lsexpr.set_label(\"elements\");"},
{"lineNum":"  157","line":"    for(Lattice_elements::const_iterator it = elements.begin();"},
{"lineNum":"  158","line":"        it != elements.end(); ++it) {"},
{"lineNum":"  159","line":"        Lsexpr element_lsexpr((*it)->as_lsexpr());"},
{"lineNum":"  160","line":"        elements_lsexpr.push_back(element_lsexpr);"},
{"lineNum":"  161","line":"    }"},
{"lineNum":"  162","line":"    retval.push_back(elements_lsexpr);"},
{"lineNum":"  163","line":"#endif"},
{"lineNum":"  164","line":"    return retval;"},
{"lineNum":"  165","line":"}"},
{"lineNum":"  166","line":"#endif"},
{"lineNum":"  167","line":""},
{"lineNum":"  168","line":"Lattice::update_flags_t"},
{"lineNum":"  169","line":"Lattice::update()"},
{"lineNum":"  170","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  171","line":"    update_flags_t res = updated;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  172","line":""},
{"lineNum":"  173","line":"    if ( updated.ref || updated.structure || updated.element)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  174","line":"    {"},
{"lineNum":"  175","line":"        // TODO: reconstruct the chef lattice"},
{"lineNum":"  176","line":"        // ..."},
{"lineNum":"  177","line":""},
{"lineNum":"  178","line":"        updated = { false, false, false };","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  179","line":"    }"},
{"lineNum":"  180","line":""},
{"lineNum":"  181","line":"    return res;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  182","line":"}"},
{"lineNum":"  183","line":""},
{"lineNum":"  184","line":"void"},
{"lineNum":"  185","line":"Lattice::append(Lattice_element const & element)"},
{"lineNum":"  186","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  187","line":"    elements.push_back(Lattice_element_processor::process(element));","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  188","line":"    elements.back().set_lattice(*this);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  189","line":"    updated.structure = true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  190","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  191","line":""},
{"lineNum":"  192","line":"#if 0"},
{"lineNum":"  193","line":"void"},
{"lineNum":"  194","line":"Lattice::derive_external_attributes()"},
{"lineNum":"  195","line":"{"},
{"lineNum":"  196","line":"#if 0"},
{"lineNum":"  197","line":"    bool needed = false;"},
{"lineNum":"  198","line":"    for (Lattice_elements::const_iterator it = elements.begin();"},
{"lineNum":"  199","line":"            it != elements.end(); ++it) {"},
{"lineNum":"  200","line":"        if ((*it)->get_needs_external_derive()) {"},
{"lineNum":"  201","line":"            needed = true;"},
{"lineNum":"  202","line":"        }"},
{"lineNum":"  203","line":"    }"},
{"lineNum":"  204","line":"    if (needed) {"},
{"lineNum":"  205","line":"        if (!reference_particle_allocated) {"},
{"lineNum":"  206","line":"            throw std::runtime_error("},
{"lineNum":"  207","line":"                    \"Lattice::derive_external_attributes requires a reference_particle\");"},
{"lineNum":"  208","line":"        }"},
{"lineNum":"  209","line":"        double beta = reference_particle->get_beta();"},
{"lineNum":"  210","line":"        double lattice_length = get_length();"},
{"lineNum":"  211","line":"        for (Lattice_elements::const_iterator it = elements.begin();"},
{"lineNum":"  212","line":"                it != elements.end(); ++it) {"},
{"lineNum":"  213","line":"            if ((*it)->get_needs_external_derive()) {"},
{"lineNum":"  214","line":"                element_adaptor_map_sptr->get_adaptor((*it)->get_type())->set_derived_attributes_external("},
{"lineNum":"  215","line":"                        *(*it), lattice_length, beta);"},
{"lineNum":"  216","line":"            }"},
{"lineNum":"  217","line":"        }"},
{"lineNum":"  218","line":"    }"},
{"lineNum":"  219","line":"#endif"},
{"lineNum":"  220","line":"}"},
{"lineNum":"  221","line":"#endif"},
{"lineNum":"  222","line":""},
{"lineNum":"  223","line":"void"},
{"lineNum":"  224","line":"Lattice::set_all_double_attribute("},
{"lineNum":"  225","line":"        std::string const & name,"},
{"lineNum":"  226","line":"        double value,"},
{"lineNum":"  227","line":"        bool increment_revision)"},
{"lineNum":"  228","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  229","line":"    for (auto & e : elements)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  230","line":"        e.set_double_attribute(name, value, increment_revision);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  231","line":""},
{"lineNum":"  232","line":"    updated.element = true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  233","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  234","line":""},
{"lineNum":"  235","line":"void"},
{"lineNum":"  236","line":"Lattice::set_all_string_attribute("},
{"lineNum":"  237","line":"        std::string const & name,"},
{"lineNum":"  238","line":"        std::string const & value,"},
{"lineNum":"  239","line":"        bool increment_revision )"},
{"lineNum":"  240","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  241","line":"    for (auto & e : elements)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  242","line":"        e.set_string_attribute(name, value, increment_revision);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  243","line":""},
{"lineNum":"  244","line":"    updated.element = true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  245","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  246","line":""},
{"lineNum":"  247","line":"std::list<Lattice_element> const &"},
{"lineNum":"  248","line":"Lattice::get_elements() const"},
{"lineNum":"  249","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  250","line":"    return elements;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  251","line":"}"},
{"lineNum":"  252","line":""},
{"lineNum":"  253","line":"std::list<Lattice_element> &"},
{"lineNum":"  254","line":"Lattice::get_elements()"},
{"lineNum":"  255","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  256","line":"    return elements;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  257","line":"}"},
{"lineNum":"  258","line":""},
{"lineNum":"  259","line":"void"},
{"lineNum":"  260","line":"Lattice::reset_all_markers()"},
{"lineNum":"  261","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  262","line":"    for(auto& e : elements)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  263","line":"        e.reset_markers();"},
{"lineNum":"  264","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  265","line":""},
{"lineNum":"  266","line":"double"},
{"lineNum":"  267","line":"Lattice::get_length() const"},
{"lineNum":"  268","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  269","line":"    double length = 0.0;"},
{"lineNum":"  270","line":"    for (auto const & e : elements) length += e.get_length();","class":"lineNoCov","hits":"0","possible_hits":"6",},
{"lineNum":"  271","line":"    return length;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  272","line":"}"},
{"lineNum":"  273","line":""},
{"lineNum":"  274","line":"double"},
{"lineNum":"  275","line":"Lattice::get_total_angle() const"},
{"lineNum":"  276","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  277","line":"    double angle = 0.0;"},
{"lineNum":"  278","line":"    for (auto const & e : elements) angle += e.get_bend_angle();","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  279","line":"    return angle;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  280","line":"}"},
{"lineNum":"  281","line":""},
{"lineNum":"  282","line":"std::string"},
{"lineNum":"  283","line":"Lattice::as_string() const"},
{"lineNum":"  284","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  285","line":"    std::stringstream sstream;"},
{"lineNum":"  286","line":"    sstream << name << \":\\n\";"},
{"lineNum":"  287","line":"    for (auto const & e : elements) sstream << e.as_string() << std::endl;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  288","line":"    return sstream.str();"},
{"lineNum":"  289","line":"}","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  290","line":""},
{"lineNum":"  291","line":"void"},
{"lineNum":"  292","line":"Lattice::print(Logger & logger) const"},
{"lineNum":"  293","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  294","line":"    logger(LoggerV::DEBUG) << as_string() << std::endl;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  295","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  296","line":""},
{"lineNum":"  297","line":"void"},
{"lineNum":"  298","line":"Lattice::export_madx_file(std::string const& filename) const"},
{"lineNum":"  299","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  300","line":"    std::ofstream mxfile(filename);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  301","line":""},
{"lineNum":"  302","line":"    if (!mxfile.is_open())","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  303","line":"    {"},
{"lineNum":"  304","line":"        throw std::runtime_error(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  305","line":"                \"Lattice::as_madx_file() unable to create file\");"},
{"lineNum":"  306","line":"    }"},
{"lineNum":"  307","line":""},
{"lineNum":"  308","line":"    // \"beam, pc={{momentum}}, particle={{particle}}\""},
{"lineNum":"  309","line":"    mxfile << reference_particle.as_madx() << \"\\n\\n\";","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  310","line":""},
{"lineNum":"  311","line":"    // \"{{element_label}} : {{element_type}}, {{attr}}={{val}}...\""},
{"lineNum":"  312","line":"    std::unordered_set<std::string> elm_names;"},
{"lineNum":"  313","line":"    for(auto const& e : elements)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  314","line":"    {"},
{"lineNum":"  315","line":"        mxfile << e.as_madx() << \"\\n\";","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  316","line":"        elm_names.insert(e.get_name());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  317","line":"    }"},
{"lineNum":"  318","line":""},
{"lineNum":"  319","line":"    double pos = 0.0;"},
{"lineNum":"  320","line":"    int idx = 0;"},
{"lineNum":"  321","line":""},
{"lineNum":"  322","line":"    // \"{{name}}: sequence, refer=entry\""},
{"lineNum":"  323","line":"    mxfile << \"\\n\" << name << \": sequence, l = \""},
{"lineNum":"  324","line":"           << get_length() << \", refer = entry;\\n\";","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  325","line":""},
{"lineNum":"  326","line":"    // \"{{element_label}} : {{element}}, at={{pos}}...\""},
{"lineNum":"  327","line":"    for(auto const& e : elements)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  328","line":"    {"},
{"lineNum":"  329","line":"        std::stringstream label;"},
{"lineNum":"  330","line":"        label << name << \"_\" << idx;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  331","line":""},
{"lineNum":"  332","line":"        while(elm_names.count(label.str()))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  333","line":"            label << \"_dup\";"},
{"lineNum":"  334","line":""},
{"lineNum":"  335","line":"        elm_names.insert(label.str());"},
{"lineNum":"  336","line":""},
{"lineNum":"  337","line":"        mxfile << label.str() << \": \""},
{"lineNum":"  338","line":"               << e.get_name() << \", at=\" << pos << \";\\n\";","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  339","line":""},
{"lineNum":"  340","line":"        pos += e.get_length();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  341","line":"        ++idx;"},
{"lineNum":"  342","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  343","line":""},
{"lineNum":"  344","line":"    // \"endsequence;\""},
{"lineNum":"  345","line":"    mxfile << \"endsequence;\\n\";"},
{"lineNum":"  346","line":""},
{"lineNum":"  347","line":"    // done"},
{"lineNum":"  348","line":"    mxfile.close();"},
{"lineNum":"  349","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  350","line":""},
{"lineNum":"  351","line":"Lattice"},
{"lineNum":"  352","line":"Lattice::import_madx_file("},
{"lineNum":"  353","line":"        std::string const& filename,"},
{"lineNum":"  354","line":"        std::string const& line)"},
{"lineNum":"  355","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  356","line":"    return MadX_reader().get_lattice(line, filename);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  357","line":"}"},
{"lineNum":"  358","line":""},
{"lineNum":"  359","line":"void"},
{"lineNum":"  360","line":"Lattice::save_deposited_charge("},
{"lineNum":"  361","line":"        std::string const& fname,"},
{"lineNum":"  362","line":"        int bunch_idx, int train_idx) const"},
{"lineNum":"  363","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  364","line":"    static bool first_write = true;"},
{"lineNum":"  365","line":"    static std::unique_ptr<Hdf5_file> file(","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  366","line":"            new Hdf5_file(fname, Hdf5_file::truncate, Commxx()));","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  367","line":""},
{"lineNum":"  368","line":"    if (fname != file->get_filename())","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  369","line":"    {"},
{"lineNum":"  370","line":"        file.reset(new Hdf5_file(fname, Hdf5_file::truncate, Commxx()));","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  371","line":"        first_write = true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  372","line":"    }"},
{"lineNum":"  373","line":""},
{"lineNum":"  374","line":"    if (first_write)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  375","line":"    {"},
{"lineNum":"  376","line":"        int idx = 0;"},
{"lineNum":"  377","line":"        double s = 0.0;"},
{"lineNum":"  378","line":"        karray1d sn(\"s_n\", elements.size());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  379","line":""},
{"lineNum":"  380","line":"        for(auto const& elm : elements)","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  381","line":"        {"},
{"lineNum":"  382","line":"            s += elm.get_length();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  383","line":"            sn[idx] = s;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  384","line":"            ++idx;"},
{"lineNum":"  385","line":"        }"},
{"lineNum":"  386","line":""},
{"lineNum":"  387","line":"        file->write_single(\"s_n\", sn);"},
{"lineNum":"  388","line":"        first_write = false;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  389","line":"    }"},
{"lineNum":"  390","line":""},
{"lineNum":"  391","line":"    int idx = 0;"},
{"lineNum":"  392","line":"    karray1d values(\"values\", elements.size());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  393","line":""},
{"lineNum":"  394","line":"    for(auto const& elm : elements)","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  395","line":"        values[idx++] = elm.get_deposited_charge(bunch_idx, train_idx);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  396","line":""},
{"lineNum":"  397","line":"    MPI_Allreduce(MPI_IN_PLACE, values.data(), elements.size(),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  398","line":"            MPI_DOUBLE, MPI_SUM, MPI_COMM_WORLD);"},
{"lineNum":"  399","line":""},
{"lineNum":"  400","line":"    file->append_single(\"deposited_charge\", values);"},
{"lineNum":"  401","line":"    file->flush();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  402","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  403","line":""},
{"lineNum":"  404","line":""},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "fodo_cxx", "date" : "2021-12-15 09:03:42", "instrumented" : 120, "covered" : 0,};
var merged_data = [];
