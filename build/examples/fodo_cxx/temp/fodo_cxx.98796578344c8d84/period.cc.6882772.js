var data = {lines:[
{"lineNum":"    1","line":"#include \"period.h\""},
{"lineNum":"    2","line":"#include \"synergia/bunch/bunch.h\""},
{"lineNum":"    3","line":""},
{"lineNum":"    4","line":"namespace"},
{"lineNum":"    5","line":"{"},
{"lineNum":"    6","line":"    struct Zcut_aperture"},
{"lineNum":"    7","line":"    {"},
{"lineNum":"    8","line":"        double half_length;"},
{"lineNum":"    9","line":""},
{"lineNum":"   10","line":"        KOKKOS_INLINE_FUNCTION"},
{"lineNum":"   11","line":"        bool discard(ConstParticles const& parts,"},
{"lineNum":"   12","line":"                ConstParticleMasks const&, int p) const"},
{"lineNum":"   13","line":"        {"},
{"lineNum":"   14","line":"           if  (std::abs(parts(p, 4)) > half_length) return true;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   15","line":"           else return false;"},
{"lineNum":"   16","line":"        }"},
{"lineNum":"   17","line":"    };"},
{"lineNum":"   18","line":""},
{"lineNum":"   19","line":"    struct alg_z_period","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   20","line":"    {"},
{"lineNum":"   21","line":"        Particles p;"},
{"lineNum":"   22","line":"        ConstParticleMasks masks;"},
{"lineNum":"   23","line":""},
{"lineNum":"   24","line":"        double length_cdt;"},
{"lineNum":"   25","line":"        double half_length;"},
{"lineNum":"   26","line":""},
{"lineNum":"   27","line":"        KOKKOS_INLINE_FUNCTION"},
{"lineNum":"   28","line":"        void operator()(const int i) const"},
{"lineNum":"   29","line":"        {"},
{"lineNum":"   30","line":"            if (masks(i))","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   31","line":"            {"},
{"lineNum":"   32","line":"                double tmp = p(i, 4) + half_length;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   33","line":"                if(tmp>0) p(i, 4) = fmod(tmp, length_cdt) - half_length;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   34","line":"                else      p(i, 4) = fmod(tmp, length_cdt) + half_length;"},
{"lineNum":"   35","line":"            }"},
{"lineNum":"   36","line":"        }"},
{"lineNum":"   37","line":"    };"},
{"lineNum":"   38","line":""},
{"lineNum":"   39","line":"    struct alg_bucket_barrier","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   40","line":"    {"},
{"lineNum":"   41","line":"        Particles p;"},
{"lineNum":"   42","line":"        ConstParticleMasks masks;"},
{"lineNum":"   43","line":""},
{"lineNum":"   44","line":"        double length_cdt;"},
{"lineNum":"   45","line":"        double half_length;"},
{"lineNum":"   46","line":""},
{"lineNum":"   47","line":"        KOKKOS_INLINE_FUNCTION"},
{"lineNum":"   48","line":"        void operator()(const int i) const"},
{"lineNum":"   49","line":"        {"},
{"lineNum":"   50","line":"            if (masks(i))","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   51","line":"            {"},
{"lineNum":"   52","line":"                double z = p(i, 4);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   53","line":""},
{"lineNum":"   54","line":"                if (z > half_length || z < -half_length)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   55","line":"                {"},
{"lineNum":"   56","line":"                    double px = p(i, 1);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   57","line":"                    double py = p(i, 3);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   58","line":"                    double dpop = p(i, 5);"},
{"lineNum":"   59","line":""},
{"lineNum":"   60","line":"                    double px2 = px * px;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   61","line":"                    double py2 = py * py;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   62","line":"                    double dp2 = (dpop + 1.0) * (dpop + 1.0);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   63","line":""},
{"lineNum":"   64","line":"                    // flip the longitudinal momentum"},
{"lineNum":"   65","line":"                    p(i, 5) = sqrt(4.0 + dp2 - 4.0 * sqrt(dp2 - px2 - py2)) - 1.0;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   66","line":""},
{"lineNum":"   67","line":"                    // adjust the z position"},
{"lineNum":"   68","line":"                    if (z > half_length)","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   69","line":"                    {"},
{"lineNum":"   70","line":"                        double off = fmod(z + half_length, length_cdt);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   71","line":"                        p(i, 4) = half_length - off;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   72","line":"                    }"},
{"lineNum":"   73","line":"                    else"},
{"lineNum":"   74","line":"                    {"},
{"lineNum":"   75","line":"                        double off = fmod(z - half_length, length_cdt);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   76","line":"                        p(i, 4) = -half_length - off;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   77","line":"                    }"},
{"lineNum":"   78","line":"                }"},
{"lineNum":"   79","line":"            }"},
{"lineNum":"   80","line":"        }"},
{"lineNum":"   81","line":"    };"},
{"lineNum":"   82","line":""},
{"lineNum":"   83","line":"}"},
{"lineNum":"   84","line":""},
{"lineNum":"   85","line":""},
{"lineNum":"   86","line":"void apply_longitudinal_periodicity(Bunch& bunch, double length)"},
{"lineNum":"   87","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   88","line":"    //Bunch::State state=bunch.get_state();"},
{"lineNum":"   89","line":"    //bunch.convert_to_state(Bunch::fixed_z_lab);"},
{"lineNum":"   90","line":""},
{"lineNum":"   91","line":"    double beta = bunch.get_reference_particle().get_beta();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   92","line":"    double length_cdt = length / beta;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   93","line":"    double half_length = 0.5 * length_cdt;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   94","line":""},
{"lineNum":"   95","line":"    if (bunch.get_local_num(ParticleGroup::regular))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   96","line":"    {"},
{"lineNum":"   97","line":"        alg_z_period alg{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   98","line":"            bunch.get_local_particles(ParticleGroup::regular),"},
{"lineNum":"   99","line":"            bunch.get_local_particle_masks(ParticleGroup::regular),"},
{"lineNum":"  100","line":"            length_cdt, half_length"},
{"lineNum":"  101","line":"        };"},
{"lineNum":"  102","line":""},
{"lineNum":"  103","line":"        Kokkos::parallel_for(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  104","line":"                bunch.get_local_num(ParticleGroup::regular), alg);"},
{"lineNum":"  105","line":"    }"},
{"lineNum":"  106","line":""},
{"lineNum":"  107","line":"    if (bunch.get_local_num(ParticleGroup::spectator))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  108","line":"    {"},
{"lineNum":"  109","line":"        alg_z_period alg{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  110","line":"            bunch.get_local_particles(ParticleGroup::spectator),"},
{"lineNum":"  111","line":"            bunch.get_local_particle_masks(ParticleGroup::spectator),"},
{"lineNum":"  112","line":"            length_cdt, half_length"},
{"lineNum":"  113","line":"        };"},
{"lineNum":"  114","line":""},
{"lineNum":"  115","line":"        Kokkos::parallel_for(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  116","line":"                bunch.get_local_num(ParticleGroup::spectator), alg);"},
{"lineNum":"  117","line":"    }"},
{"lineNum":"  118","line":""},
{"lineNum":"  119","line":"    //bunch.convert_to_state(state);"},
{"lineNum":"  120","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  121","line":""},
{"lineNum":"  122","line":"void apply_longitudinal_bucket_barrier(Bunch& bunch, double length)"},
{"lineNum":"  123","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  124","line":"    //Bunch::State state=bunch.get_state();"},
{"lineNum":"  125","line":"    //bunch.convert_to_state(Bunch::fixed_z_lab);"},
{"lineNum":"  126","line":""},
{"lineNum":"  127","line":"    double beta = bunch.get_reference_particle().get_beta();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  128","line":"    double length_cdt = length / beta;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  129","line":"    double half_length = 0.5 * length_cdt;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  130","line":""},
{"lineNum":"  131","line":"    if (bunch.get_local_num(ParticleGroup::regular))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  132","line":"    {"},
{"lineNum":"  133","line":"        alg_bucket_barrier alg{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  134","line":"            bunch.get_local_particles(ParticleGroup::regular),"},
{"lineNum":"  135","line":"            bunch.get_local_particle_masks(ParticleGroup::regular),"},
{"lineNum":"  136","line":"            length_cdt, half_length"},
{"lineNum":"  137","line":"        };"},
{"lineNum":"  138","line":""},
{"lineNum":"  139","line":"        Kokkos::parallel_for(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  140","line":"                bunch.get_local_num(ParticleGroup::regular), alg);"},
{"lineNum":"  141","line":"    }"},
{"lineNum":"  142","line":""},
{"lineNum":"  143","line":"    if (bunch.get_local_num(ParticleGroup::spectator))","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  144","line":"    {"},
{"lineNum":"  145","line":"        alg_bucket_barrier alg{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  146","line":"            bunch.get_local_particles(ParticleGroup::spectator),"},
{"lineNum":"  147","line":"            bunch.get_local_particle_masks(ParticleGroup::spectator),"},
{"lineNum":"  148","line":"            length_cdt, half_length"},
{"lineNum":"  149","line":"        };"},
{"lineNum":"  150","line":""},
{"lineNum":"  151","line":"        Kokkos::parallel_for(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  152","line":"                bunch.get_local_num(ParticleGroup::spectator), alg);"},
{"lineNum":"  153","line":"    }"},
{"lineNum":"  154","line":""},
{"lineNum":"  155","line":"    //bunch.convert_to_state(state);"},
{"lineNum":"  156","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  157","line":""},
{"lineNum":"  158","line":"void apply_zcut(Bunch& bunch, double length)"},
{"lineNum":"  159","line":"{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  160","line":"    //Bunch::State state = bunch.get_state();"},
{"lineNum":"  161","line":"    //bunch.convert_to_state(Bunch::fixed_z_lab);"},
{"lineNum":"  162","line":""},
{"lineNum":"  163","line":"    double beta = bunch.get_reference_particle().get_beta();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  164","line":"    double half_length = 0.5 * length / beta;"},
{"lineNum":"  165","line":"    bunch.apply_zcut(Zcut_aperture{half_length});"},
{"lineNum":"  166","line":""},
{"lineNum":"  167","line":"    //bunch.convert_to_state(state);"},
{"lineNum":"  168","line":"}","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  169","line":""},
{"lineNum":"  170","line":""},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "fodo_cxx", "date" : "2021-12-15 09:03:42", "instrumented" : 45, "covered" : 0,};
var merged_data = [];
