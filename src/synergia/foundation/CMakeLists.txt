file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/__init__.py 
    DESTINATION ${CMAKE_CURRENT_BINARY_DIR})

add_library(synergia_foundation four_momentum.cc reference_particle.cc
    distribution.cc multi_diagnostics.cc
    diagnostics_write_helper.cc poly.cc trigon.h poly_particle.cc
    trigon_particle.cc)
target_link_libraries(synergia_foundation ${GSL_CONFIG_LIBS}
    synergia_parallel_utils synergia_hdf5_utils synergia_serialization
    lsexpr
    ${Boost_SERIALIZATION_LIBRARIES})
if (BUILD_PYTHON_BINDINGS)
    add_python_extension(foundation foundation_wrap.cc)
    target_link_libraries(foundation synergia_foundation ${Boost_LIBRARIES})
endif ()

install(TARGETS synergia_foundation DESTINATION ${LIB_INSTALL_DIR})
install(FILES
    distribution.h
    diagnostics_write_helper.h
    four_momentum.h
    math_constants.h
    multi_diagnostics.h
    physical_constants.h
    poly.h
    poly_particle.h
    reference_particle.h
    trigon.h
    trigon_particle.h
    DESTINATION ${INCLUDE_INSTALL_DIR}/synergia/foundation)
if (BUILD_PYTHON_BINDINGS)
    install(FILES
        __init__.py
        DESTINATION ${PYTHON_INSTALL_DIR}/synergia/foundation)
    install(TARGETS
        foundation
        DESTINATION ${PYTHON_INSTALL_DIR}/synergia/foundation)
endif ()

add_subdirectory(tests)
