S2_INSTALL = $(chef-config.sh --prefix)

# Ubuntu 20.04 needs these HDF5 includes
HDF5_FLAGS = -I/usr/include/hdf5/serial
HDF5_LDLIBS = -L/usr/lib/x86_64-linux-gnu -lhdf5_serial -lhdf5_cpp

# SL7 doesn't need them

CC=mpicxx
CXX=mpicxx
LD=mpicxx

CXXFLAGS = $(shell chef-config.sh --includes) -I$(S2_INSTALL)/include $(HDF5_FLAGS) -O2

LDLIBS = $(shell chef-config.sh --link)
LDLIBS += -lsynergia_foundation -lsynergia_lattice -lsynergia_simulation -lsynergia_serialization \
	-lsynergia_parallel_utils -lsynergia_hdf5_utils -lsynergia_bunch -lsynergia_distributed_fft -lsynergia_collective -lsynergia_command_line -lsynergia \
	-lfftw3 -lfftw3_mpi -lboost_system -lboost_serialization -Wl,-rpath=$(S2_INSTALL)/lib $(HDF5_LDLIBS)

